---
import ArrowLink from './ArrowLink.astro';

interface Props {
  subtitle: string;
  title: string;
  description: string;
  image: string; // Full res URL for lightbox
  src?: string;  // Responsive src
  srcset?: string;
  sizes?: string;
  alt: string;
  linkHref: string;
  linkLabel: string;
  reverse?: boolean;
}

const { subtitle, title, description, image, src, srcset, sizes, alt, linkHref, linkLabel, reverse } = Astro.props;
---
<article class="project-row grid grid-cols-1 md:grid-cols-12 gap-16 md:gap-8 items-center">
  
  <!-- Text Column -->
  <div class:list={["md:col-span-4 space-y-8", reverse ? "md:order-2" : ""]}>
    <div>
      <span class="text-[10px] font-bold uppercase tracking-[0.2em] opacity-40 block mb-6">
        {subtitle}
      </span>
      <h3 class="text-4xl font-display mb-6">{title}</h3>
      <p class="text-muted text-sm leading-relaxed max-w-sm">{description}</p>
    </div>
    <div class="pt-8 border-t border-border-color-DEFAULT">
      <ArrowLink href={linkHref} label={linkLabel} />
    </div>
  </div>

  <!-- Image Column -->
  <div class:list={["md:col-span-8", reverse ? "md:order-1 md:pr-24" : "md:pl-24"]}>
    <div class="w-full group cursor-pointer" data-lightbox data-full-src={image} data-caption={`${title} â€” ${subtitle}`}>
      <div class="aspect-[16/10] overflow-hidden rounded-lg bg-gray-100 relative">
        <img
          alt={alt}
          src={src || image}
          srcset={srcset}
          sizes={sizes}
          loading="lazy"
          decoding="async"
          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
        />
        <div class="absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"></div>
      </div>
    </div>
  </div>
</article>
