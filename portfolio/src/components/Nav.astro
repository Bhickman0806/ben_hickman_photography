---
import { getSiteSettings } from '../lib/queries';

const settings = await getSiteSettings();
const links = settings?.navLinks || [
  { label: 'Archive', href: '/archive' },
  { label: 'Contact', href: '/contact' },
];
const siteName = settings?.siteName || 'Ben Hickman Photography Portfolio';
---
<nav id="navbar" class="fixed top-0 left-0 w-full z-50 px-8 py-6 text-black transition-transform duration-300">
  <div class="flex items-center justify-between w-full">
    <!-- Left: Logo/Name -->
    <a href="/" data-home-link class="flex items-center gap-4 hover:opacity-50 transition-opacity">
      <div class="flex gap-1">
        <span class="w-8 h-[1px] bg-current"></span>
        <span class="w-4 h-[1px] bg-current"></span>
      </div>
      <span class="text-[10px] uppercase tracking-[0.2em] font-medium">Ben Hickman</span>
    </a>

    <!-- Center: Brand Logo -->
    <div class="absolute left-1/2 -translate-x-1/2">
      <a href="/" data-home-link>
        <img src="/abstract_Letterform_Logo.svg"
            alt="Ben Hickman Photography" class="h-[4.2rem] w-auto mt-2">
      </a>
    </div>

    <!-- Right: Navigation Links -->
    <div class="flex items-center gap-8">
      {links.map(link => (
        <a href={link.href}
           class="text-[10px] uppercase tracking-[0.2em] font-medium hover:opacity-50 transition-opacity">
          {link.label}
        </a>
      ))}
    </div>
  </div>
</nav>

<script>
  let lastScrollY = window.scrollY;
  const navbar = document.getElementById("navbar");

  if (navbar) {
    window.addEventListener("scroll", () => {
      const currentScrollY = window.scrollY;

      // Handle Navbar based on scroll direction
      if (currentScrollY > lastScrollY && currentScrollY > 50) {
        navbar.classList.add("-translate-y-full");
      } else {
        navbar.classList.remove("-translate-y-full");
      }

      lastScrollY = currentScrollY;
    });
  }

  // Home links: smooth scroll to top on homepage, navigate otherwise
  document.querySelectorAll<HTMLAnchorElement>('[data-home-link]').forEach(link => {
    link.addEventListener('click', (e) => {
      if (window.location.pathname === '/') {
        e.preventDefault();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });
  });
</script>
